<script>
  import Danmaku from 'danmaku';

  const danmakuList = [
    'animeko å¤ªæ–¹ä¾¿äº†å¯¼è‡´ç»å¸¸æ‘¸é±¼',
    'å¥½æ¼‚äº®çš„å®¢æˆ·ç«¯',
    'elegant !',
    'é€™ç¨®é …ç›®ç¸½æ˜¯è¦æ”¯æŒçš„(bgm105)',
    'æ”¯æŒï¼ŒæŠ€æœ¯åŠ›è´¡çŒ®çš„ç¾å¥½ä¸–ç•Œ',
    '(bgm105)å¥½ä¸œè¥¿å•Š',
    'å¥½å‰å®³çš„è½¯ä»¶å•Šï¼ä¸€æ¡äº”æ¯›è®°å¾—åˆ æ‹¬å·',
    'Ciallo~ (âˆ ãƒ»Ï‰< )âŒ’â˜†',
  ];

  const container = document.getElementById('danmaku-container');
  // @ts-ignore
  let danmakuTimer = null;

  function getRandomColor() {
    const r = Math.floor(Math.random() * 128) + 128;
    const g = Math.floor(Math.random() * 128) + 128;
    const b = Math.floor(Math.random() * 128) + 128;
    return `rgb(${r}, ${g}, ${b})`;
  }

  function getRandomInt(min: number, max: number) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
  }

  function addDanmaku(dmk: any) {
    const len = danmakuList.length;
    const idx = getRandomInt(0, len - 1);
    dmk.emit({
      text: danmakuList[idx],
      style: {
        fontSize: `${getRandomInt(22, 32)}px`,
        color: getRandomColor(),
      },
    });
  }

  if (container) {
    const danmaku = new Danmaku({ container: container, engine: 'dom', speed: 110 });
    danmakuTimer = setInterval(() => {
      addDanmaku(danmaku);
    }, Math.random() * 1000);
  }
</script>

<div>
  <h2>
    ğŸ’¬ç”¨æˆ·è¯„ä»·ğŸ—¨
  </h2>
  <div id="danmaku-container">
  <div>
    <input
      disabled type="text" placeholder="æˆ‘ä¹Ÿè¦è¯´è¯´ï¼ˆæš‚ä¸å¼€æ”¾ï¼‰" required
     
    >
    <button disabled type="submit">
      æäº¤
    </button>
  </div>
</div>
