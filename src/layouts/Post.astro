---
import Layout from '@/layouts/Layout.astro'
import '@/styles/markdown.css'

const { title } = Astro.props.frontmatter
const pageTitle = `Animeko - ${title}`;
---

<Layout title={pageTitle}>
    <div class="pt-20 pb-12 max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <article class="markdown-body">
            <slot />
        </article>
    </div>

    <script>
        // Copy Button Logic
        const codeBlocks = document.querySelectorAll('pre');
        codeBlocks.forEach(block => {
            const wrapper = document.createElement('div');
            wrapper.className = 'code-block-wrapper';
            
            const button = document.createElement('button');
            button.className = 'copy-button';
            button.innerText = 'Copy';
            
            // Insert wrapper before block
            block.parentNode?.insertBefore(wrapper, block);
            wrapper.appendChild(block);
            wrapper.appendChild(button);
            
            button.addEventListener('click', async () => {
                const code = block.querySelector('code')?.innerText;
                if (code) {
                    await navigator.clipboard.writeText(code);
                    button.innerText = 'Copied!';
                    setTimeout(() => {
                        button.innerText = 'Copy';
                    }, 2000);
                }
            });
        });
    </script>
</Layout>

